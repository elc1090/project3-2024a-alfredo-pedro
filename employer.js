let curriculos = [{
        "name": "João Silva",
        "email": "joao.silva@example.com",
        "phone": "(51) 98765-4321",
        "location": "Porto Alegre",
        "age": 28,
        "gender": "Masculino",
        "area": "Área da Saúde",
        "formation": "Ensino Superior Completo",
        "description": "Enfermeiro com experiência em emergências."
    },
    {
        "name": "Maria Santos",
        "email": "maria.santos@example.com",
        "phone": "(53) 91234-5678",
        "location": "Pelotas",
        "age": 35,
        "gender": "Feminino",
        "area": "Logística",
        "formation": "Ensino Médio Completo",
        "description": "Experiência em gerenciamento de estoque e logística."
    },
    {
        "name": "Pedro Oliveira",
        "email": "pedro.oliveira@example.com",
        "phone": "(54) 99876-5432",
        "location": "Caxias do Sul",
        "age": 40,
        "gender": "Masculino",
        "area": "Culinária",
        "formation": "Ensino Médio Completo",
        "description": "Chef de cozinha com mais de 15 anos de experiência."
    },
    {
        "name": "Ana Souza",
        "email": "ana.souza@example.com",
        "phone": "(55) 98765-4321",
        "location": "Santa Maria",
        "age": 25,
        "gender": "Feminino",
        "area": "Trabalho Manual",
        "formation": "Ensino Médio Incompleto",
        "description": "Experiência em serviços gerais e manuais."
    },
    {
        "name": "Carlos Ferreira",
        "email": "carlos.ferreira@example.com",
        "phone": "(51) 91234-5678",
        "location": "Porto Alegre",
        "age": 30,
        "gender": "Masculino",
        "area": "Engenharia e Reconstrução",
        "formation": "Ensino Superior Completo",
        "description": "Engenheiro civil com foco em reconstrução após desastres."
    },
    {
        "name": "Sandra Lima",
        "email": "sandra.lima@example.com",
        "phone": "(54) 99876-5432",
        "location": "Caxias do Sul",
        "age": 27,
        "gender": "Feminino",
        "area": "Suporte Social",
        "formation": "Ensino Superior Incompleto",
        "description": "Assistente social com experiência em apoio psicológico."
    },
    {
        "name": "Ricardo Alves",
        "email": "ricardo.alves@example.com",
        "phone": "(53) 98765-4321",
        "location": "Pelotas",
        "age": 33,
        "gender": "Masculino",
        "area": "Segurança e Proteção",
        "formation": "Ensino Médio Completo",
        "description": "Ex-policial com treinamento em segurança privada."
    },
    {
        "name": "Juliana Costa",
        "email": "juliana.costa@example.com",
        "phone": "(55) 91234-5678",
        "location": "Santa Maria",
        "age": 29,
        "gender": "Feminino",
        "area": "Área da Saúde",
        "formation": "Ensino Superior Completo",
        "description": "Médica especialista em emergências médicas."
    },
    {
        "name": "Fernando Pereira",
        "email": "fernando.pereira@example.com",
        "phone": "(51) 99876-5432",
        "location": "Porto Alegre",
        "age": 31,
        "gender": "Masculino",
        "area": "Logística",
        "formation": "Ensino Superior Incompleto",
        "description": "Gerente de operações logísticas com experiência internacional."
    },
    {
        "name": "Aline Oliveira",
        "email": "aline.oliveira@example.com",
        "phone": "(54) 98765-4321",
        "location": "Caxias do Sul",
        "age": 26,
        "gender": "Feminino",
        "area": "Culinária",
        "formation": "Ensino Médio Completo",
        "description": "Chefe de cozinha especializada em culinária regional."
    },
    {
        "name": "Luiz Silva",
        "email": "luiz.silva@example.com",
        "phone": "(53) 91234-5678",
        "location": "Pelotas",
        "age": 34,
        "gender": "Masculino",
        "area": "Trabalho Manual",
        "formation": "Ensino Médio Completo",
        "description": "Pedreiro com vasta experiência em construção civil."
    },
    {
        "name": "Patrícia Santos",
        "email": "patricia.santos@example.com",
        "phone": "(55) 99876-5432",
        "location": "Santa Maria",
        "age": 32,
        "gender": "Feminino",
        "area": "Engenharia e Reconstrução",
        "formation": "Ensino Superior Completo",
        "description": "Engenheira elétrica com foco em redes de distribuição."
    },
    {
        "name": "Gabriel Lima",
        "email": "gabriel.lima@example.com",
        "phone": "(51) 98765-4321",
        "location": "Porto Alegre",
        "age": 29,
        "gender": "Masculino",
        "area": "Suporte Social",
        "formation": "Ensino Superior Incompleto",
        "description": "Psicólogo com experiência em atendimento de crises."
    },
    {
        "name": "Carolina Ferreira",
        "email": "carolina.ferreira@example.com",
        "phone": "(54) 91234-5678",
        "location": "Caxias do Sul",
        "age": 28,
        "gender": "Feminino",
        "area": "Segurança e Proteção",
        "formation": "Ensino Médio Completo",
        "description": "Segurança pessoal com treinamento em defesa pessoal."
    },
    {
        "name": "Lucas Alves",
        "email": "lucas.alves@example.com",
        "phone": "(53) 99876-5432",
        "location": "Pelotas",
        "age": 30,
        "gender": "Masculino",
        "area": "Área da Saúde",
        "formation": "Ensino Superior Completo",
        "description": "Enfermeiro intensivista com experiência em UTI."
    },
    {
        "name": "Camila Oliveira",
        "email": "camila.oliveira@example.com",
        "phone": "(55) 98765-4321",
        "location": "Santa Maria",
        "age": 27,
        "gender": "Feminino",
        "area": "Logística",
        "formation": "Ensino Superior Incompleto",
        "description": "Especialista em gestão de cadeia de suprimentos."
    },
    {
        "name": "Rodrigo Silva",
        "email": "rodrigo.silva@example.com",
        "phone": "(51) 91234-5678",
        "location": "Porto Alegre",
        "age": 33,
        "gender": "Masculino",
        "area": "Culinária",
        "formation": "Ensino Médio Completo",
        "description": "Chef de cozinha com experiência em alta gastronomia."
    },
    {
        "name": "Larissa Santos",
        "email": "larissa.santos@example.com",
        "phone": "(54) 99876-5432",
        "location": "Caxias do Sul",
        "age": 31,
        "gender": "Feminino",
        "area": "Trabalho Manual",
        "formation": "Ensino Médio Completo",
        "description": "Costureira com habilidades avançadas em costura industrial."
    },
    {
        "name": "Renato Lima",
        "email": "renato.lima@example.com",
        "phone": "(53) 98765-4321",
        "location": "Pelotas",
        "age": 29,
        "gender": "Masculino",
        "area": "Engenharia e Reconstrução",
        "formation": "Ensino Superior Completo",
        "description": "Engenheiro mecânico com experiência em manutenção industrial."
    }
];


const config = {
    apiKey: "AIzaSyCmFJM6xicl2D01jHmFXMQI_NisNJbnXqY",
    authDomain: "resume-back-eefe0.firebaseapp.com",
    databaseURL: "https://resume-back-eefe0-default-rtdb.firebaseio.com",
    projectId: "resume-back-eefe0",
    storageBucket: "resume-back-eefe0.appspot.com",
    messagingSenderId: "717870089790",
    appId: "1:717870089790:web:44615d3f3c01222d51336f"
  };

firebase.initializeApp(config)
const firestore = firebase.firestore() 

curriculos = []
firestore.collection("resumes").get().then((querySnapshot) =>
    {
        querySnapshot.docs.map(doc => curriculos.push(doc.data()))
        // Para cada currículo no JSON, cria e adiciona um card na grade
        curriculos.forEach(curriculo => {
        const card = criarCard(curriculo);
        cardGrid.appendChild(card);
});
    })
    

// Função para criar um card
function criarCard(curriculo) {
    const card = document.createElement('div');
    card.className = 'card';

    const nameAge = document.createElement('h2');
    nameAge.textContent = `${curriculo.name}, ${curriculo.age}`;

    const area = document.createElement('h2');
    area.textContent = `Área de Atuação: ${curriculo.area}`;

    const gender = document.createElement('p');
    gender.textContent = `Gênero: ${curriculo.gender}`;

    const formacao = document.createElement('p');
    formacao.textContent = `Formação: ${curriculo.formation}`;

    const localizacao = document.createElement('p');
    localizacao.textContent = `Localização: ${curriculo.location}`;

    const descricao = document.createElement('p');
    descricao.textContent = `Descrição: ${curriculo.description}`;

    const email = document.createElement('p');
    email.textContent = `Email: ${curriculo.email}`;

    const phone = document.createElement('p');
    phone.textContent = `Telefone: ${curriculo.phone}`;

    const botao = document.createElement('button');
    botao.textContent = 'Entrar em contato';

    card.appendChild(nameAge);
    card.appendChild(area);
    card.appendChild(gender);
    card.appendChild(formacao);
    card.appendChild(descricao);
    card.appendChild(localizacao);
    card.appendChild(email);
    card.appendChild(phone);
    card.appendChild(botao);

    return card;
}

// Seleciona o container da grade de cards
const cardGrid = document.getElementById('card-grid');


function aplicarFiltros() {
    const idadeMin = document.getElementById('idade-min').value;
    const idadeMax = document.getElementById('idade-max').value;
    const generoFiltro = document.getElementById('genero').value;
    const localizacaoFiltro = document.getElementById('localizacao').value;
    const areaFiltro = document.getElementById('area').value;
    const formacaoFiltro = document.getElementById('formacao').value;

    const cardGrid = document.getElementById('card-grid');
    cardGrid.innerHTML = '';

    const curriculosFiltrados = curriculos.filter(curriculo => {
        return (
            (!idadeMin || curriculo.age >= idadeMin) &&
            (!idadeMax || curriculo.age <= idadeMax) &&
            (!generoFiltro || curriculo.gender == generoFiltro) &&
            (!localizacaoFiltro || curriculo.location.toLowerCase().includes(localizacaoFiltro.toLowerCase())) &&
            (!areaFiltro || curriculo.area == areaFiltro) &&
            (!formacaoFiltro || curriculo.formation == formacaoFiltro)
        );
    });

    curriculosFiltrados.forEach(curriculo => {
        const card = criarCard(curriculo);
        cardGrid.appendChild(card);
    });
}


function limparFiltros() {
    document.getElementById('idade-min').value = '';
    document.getElementById('idade-max').value = '';
    document.getElementById('genero').value = '';
    document.getElementById('localizacao').value = '';
    document.getElementById('area').value = '';
    document.getElementById('formacao').value = '';

    // Aplicar os filtros novamente para mostrar todos os currículos
    aplicarFiltros();
}

document.getElementById('filtrar').addEventListener('click', aplicarFiltros);
document.getElementById('limpar').addEventListener('click', limparFiltros);

// Carregar todos os currículos inicialmente
aplicarFiltros();